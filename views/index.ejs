<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- HTML Meta Tags -->
    <title>Learning javascript blog</title>
    <meta name="description" content="Blogging about javascript." />

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="<%= url %>" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Learning javascript blog" />
    <meta property="og:description" content="Blogging about javascript." />
    <meta property="og:image" content="<%= url %>/favicon.ico?" />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta property="twitter:domain" content="<%= url %>" />
    <meta property="twitter:url" content="<%= url %>" />
    <meta name="twitter:title" content="Learning javascript blog" />
    <meta name="twitter:description" content="Blogging about javascript." />
    <meta name="twitter:image" content="<%= url %>/favicon.ico?" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@forevolve/bootstrap-dark@1.0.0/dist/css/toggle-bootstrap.min.css" />

    <link rel="stylesheet" href="/css/index.css" />
    <link rel="icon" href="/favicon.ico?" />

    <script src="/js/script.js" defer></script>

    <noscript>You need to enable javascript.</noscript>
  </head>
  <body>
    <h1 class="mb-4 text-center display-3">Posts</h1>

    <form id="searchForm" action="/search">
      <div class="form-group">
        <input type="search" name="query" class="form-control" id="searchInput" placeholder="Search (/)" autocomplete="off" required>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <div class="d-flex flex-column align-items-center gap-4" id="posts">
      <% getPostsByDate(posts).forEach(post => { %>
        <% const { frontMatter, slug } = post %>
        
        <div class="text-center d-flex flex-column card bg-light px-5 py-3 post__single">
          <h1><%= frontMatter.title %></h1>
          <p><%= formatDate(frontMatter.date, 'LL') %></p>
          <p><%= truncateString(frontMatter.description, 20) %></p> 
          <a href="/posts/<%= slug %>" class="btn btn-primary">Read more</a>
        </div>
      <% }) %>
    </div>

    <% if (locals.search) { %>
      <a href="/" class="btn btn-danger" id="back-btn">Go back</a>
    <% } %> 
  </body>
</html>
      